<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= locals.title || 'NotMlne' %></title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/rating.css">
    <style>
        /* Custom Chatbot Styles */
        .chatbase-chat-widget {
            --chatbase-primary-color: #007bff;
            --chatbase-secondary-color: #6c757d;
            --chatbase-background-color: #ffffff;
            --chatbase-text-color: #212529;
            --chatbase-border-radius: 10px;
            --chatbase-box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .chatbase-chat-widget .chat-widget-button {
            background-color: var(--chatbase-primary-color);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            box-shadow: var(--chatbase-box-shadow);
        }
        
        .chatbase-chat-widget .chat-widget-container {
            border-radius: var(--chatbase-border-radius);
            box-shadow: var(--chatbase-box-shadow);
        }
        
        .chatbase-chat-widget .chat-widget-header {
            background-color: var(--chatbase-primary-color);
            color: white;
            border-radius: var(--chatbase-border-radius) var(--chatbase-border-radius) 0 0;
        }
        
        .chatbase-chat-widget .chat-widget-messages {
            background-color: var(--chatbase-background-color);
        }
        
        .chatbase-chat-widget .chat-widget-input {
            border-top: 1px solid #dee2e6;
        }
        
        .chatbase-chat-widget .chat-widget-send-button {
            background-color: var(--chatbase-primary-color);
            color: white;
            border: none;
            border-radius: 5px;
        }
        
        .chatbase-chat-widget .chat-widget-message-bubble {
            border-radius: 15px;
            padding: 10px 15px;
            margin: 5px 0;
        }
        
        .chatbase-chat-widget .chat-widget-message-bubble.user {
            background-color: var(--chatbase-primary-color);
            color: white;
            margin-left: auto;
        }
        
        .chatbase-chat-widget .chat-widget-message-bubble.bot {
            background-color: #f8f9fa;
            color: var(--chatbase-text-color);
        }
    </style>
</head>
<body>
    <%- include('./navbar') %>
    <%- include('./flash') %>

    <!-- Chatbase Chatbot -->
    <script>
        (function(){
            if(!window.chatbase || window.chatbase("getState") !== "initialized"){
                window.chatbase = (...arguments) => {
                    if (!window.chatbase.q) window.chatbase.q = [];
                    window.chatbase.q.push(arguments)
                };
                window.chatbase = new Proxy(window.chatbase, {
                    get(target, prop) {
                        if (prop === "q") return target.q;
                        return (...args) => target(prop, ...args)
                    }
                });
            }
            const onLoad = function () {
                const script = document.createElement("script");
                script.src = "https://www.chatbase.co/embed.min.js";
                script.id = "hWcGfNuq3xLi_oGx6vXyk";
                script.domain = "www.chatbase.co";
                document.body.appendChild(script);
            };
            if (document.readyState === "complete") {
                onLoad();
            } else {
                window.addEventListener("load", onLoad);
            }
        })();
    </script>
</body>
</html> 